* { box-sizing: border-box; }
html, body { height: 100%; }
body {
    margin: 0;
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", sans-serif;
    background: linear-gradient(135deg,#e3eeff 0%,#f5f7fa 100%);
    color: #1f2d3d;
    -webkit-font-smoothing: antialiased;
    line-height: 1.4;
}

body.dark {
    background: radial-gradient(circle at 30% 20%,#283246,#0f172a 60%);
    color: #e2e8f0;
}

.app-shell { max-width: 1180px; margin: 0 auto; padding: 32px 32px 48px; }

.app-header { display: flex; gap: 16px; align-items: center; justify-content: space-between; flex-wrap: wrap; }
.app-header h1 { margin: 0; font-size: clamp(1.6rem, 2.2vw, 2.4rem); font-weight: 600; letter-spacing: .5px; background: linear-gradient(90deg,#2563eb,#7c3aed); -webkit-background-clip: text; background-clip: text; color: transparent; }

.header-actions { display: flex; gap: 12px; }
.header-actions button { cursor: pointer; border: none; background: #fff; color:#334155; padding: 10px 16px; border-radius: 12px; font-size: 14px; font-weight: 500; box-shadow:0 2px 6px rgba(15,23,42,.1); display:flex; align-items:center; gap:6px; transition: transform .2s, box-shadow .2s, background-color .2s; }
body.dark .header-actions button { background:#1e293b; color:#e2e8f0; }
.header-actions button:hover { transform: translateY(-1px); box-shadow:0 4px 12px -2px rgba(30,41,59,.2); background:#f8fafc; }
body.dark .header-actions button:hover { background:#334155; }

.layout { display: grid; grid-template-columns: minmax(320px, 440px) 1fr; gap: 28px; margin-top: 28px; align-items: start; }
@media (max-width: 960px) { .layout { grid-template-columns: 1fr; gap: 24px; } }

.panel { background: rgba(255,255,255,.9); backdrop-filter: blur(6px); border:1px solid rgba(148,163,184,.25); border-radius: 18px; padding: 24px 26px 30px; position: relative; box-shadow: 0 4px 24px -4px rgba(15,23,42,.15); height: fit-content; }
body.dark .panel { background: rgba(17,24,39,.72); border-color: rgba(71,85,105,.55); }
.panel h2 { margin: 0 0 18px; font-size: 1.05rem; font-weight: 600; letter-spacing: .5px; display:flex; align-items:center; gap:6px; }

textarea { width: 100%; min-height: 200px; max-height: 320px; resize: vertical; font: 14px/1.5 ui-monospace, SFMono-Regular, Menlo, Consolas, "Liberation Mono", monospace; padding: 16px 18px; border:1px solid #cbd5e1; border-radius: 14px; background:#f8fafc; color:#0f172a; outline:none; transition: border-color .2s, box-shadow .2s, background-color .2s; }
textarea:focus { border-color:#6366f1; box-shadow:0 0 0 3px rgba(99,102,241,.2); background:#fff; }
body.dark textarea { background:#1e293b; color:#e2e8f0; border-color:#334155; }
body.dark textarea:focus { background:#0f172a; border-color:#6366f1; }

.hint { margin-top:10px; font-size:12px; color:#64748b; }
body.dark .hint { color:#94a3b8; }

.error-box { margin-top:12px; padding:10px 14px; border:1px solid #f87171; background:#fef2f2; color:#b91c1c; font-size:13px; border-radius:10px; display:flex; gap:8px; align-items:flex-start; }
.error-box[hidden]{ display:none !important; }
body.dark .error-box { background:#451a1a; border-color:#dc2626; color:#fecaca; }

.stats { display:grid; grid-template-columns: repeat(auto-fit,minmax(170px,1fr)); gap:14px; margin-bottom:24px; }
.stat { background:#f1f5f9; border:1px solid #e2e8f0; padding:14px 16px 16px; border-radius:16px; display:flex; flex-direction:column; gap:8px; position:relative; overflow:hidden; transition: transform .2s, box-shadow .2s; }
body.dark .stat { background:#1e293b; border-color:#334155; }
.stat:before { content:""; position:absolute; inset:0; background:linear-gradient(135deg,rgba(99,102,241,.15),rgba(236,72,153,.15)); opacity:0; transition:.3s; }
.stat:hover { transform: translateY(-2px); }
.stat:hover:before { opacity:.8; }
.stat .label { font-size:11px; text-transform:uppercase; letter-spacing:1px; color:#64748b; font-weight:600; position:relative; z-index:1; }
body.dark .stat .label { color:#94a3b8; }
.stat .value { font-size:1.3rem; font-weight:600; background:linear-gradient(90deg,#2563eb,#7c3aed); -webkit-background-clip:text; background-clip:text; color:transparent; position:relative; z-index:1; }
body.dark .stat .value { background:none; color:#60a5fa; text-shadow:0 0 8px rgba(96,165,250,.35); }

.timeline { list-style:none; margin:0; padding:0 0 0 6px; position:relative; }
.timeline:before { content:""; position:absolute; left:16px; top:4px; bottom:4px; width:2px; background:linear-gradient(#6366f1,#8b5cf6); opacity:.4; }
.timeline li { position:relative; margin:0 0 22px 0; padding:0 0 0 48px; }
.timeline li:last-child { margin-bottom:8px; }
.timeline li .dot { position:absolute; left:8px; top:4px; width:16px; height:16px; border-radius:50%; background:#fff; border:3px solid #6366f1; box-shadow:0 0 0 4px rgba(99,102,241,.18); }
body.dark .timeline li .dot { background:#0f172a; border-color:#818cf8; box-shadow:0 0 0 4px rgba(129,140,248,.25); }
.timeline li .card { background:#ffffff; border:1px solid #e2e8f0; border-radius:16px; padding:16px 18px 18px; display:flex; flex-direction:column; gap:10px; position:relative; box-shadow:0 4px 12px -2px rgba(15,23,42,.12); transition: transform .3s, box-shadow .3s; }
body.dark .timeline li .card { background:#1e293b; border-color:#334155; box-shadow:0 4px 14px -2px rgba(0,0,0,.4); }
.timeline li .card:hover { transform:translateY(-2px); box-shadow:0 8px 20px -4px rgba(15,23,42,.25); }
body.dark .timeline li .card:hover { box-shadow:0 8px 20px -4px rgba(0,0,0,.6); }
.timeline .place { font-weight:600; font-size:1rem; display:flex; align-items:center; gap:6px; }
.timeline .meta { display:flex; gap:14px; flex-wrap:wrap; font-size:12px; color:#64748b; }
body.dark .timeline .meta { color:#94a3b8; }
.timeline .order { font-size:11px; background:#6366f1; color:#fff; padding:2px 8px 3px; border-radius:30px; letter-spacing:.5px; font-weight:600; box-shadow:0 2px 4px rgba(99,102,241,.45); }
body.dark .timeline .order { background:#4f46e5; }
.timeline .time { font-family:ui-monospace,monospace; }
.timeline .date { font-family:ui-monospace,monospace; }

.raw-block { margin-top:32px; }
.raw-block summary { cursor:pointer; font-weight:600; font-size:14px; padding:12px 16px; background:#f1f5f9; border:1px solid #e2e8f0; border-radius:12px; transition: background-color .2s, border-color .2s; list-style:none; user-select: none; }
.raw-block summary::-webkit-details-marker { display: none; }
.raw-block summary::before { content: "â–¶"; margin-right: 8px; font-size: 10px; transition: transform .2s; }
.raw-block[open] summary::before { transform: rotate(90deg); }
.raw-block[open] summary { border-bottom-left-radius:0; border-bottom-right-radius:0; background:#e2e8f0; }
body.dark .raw-block summary { background:#1e293b; border-color:#334155; }
.raw-block summary:hover { background:#e2e8f0; }
body.dark .raw-block summary:hover { background:#334155; }
body.dark .raw-block[open] summary { background:#334155; }
.raw-text { margin:0; padding:18px 22px 20px; background:#0f172a; color:#f1f5f9; border:1px solid #334155; border-top:none; border-bottom-left-radius:12px; border-bottom-right-radius:12px; max-height:280px; overflow:auto; font:12px/1.6 ui-monospace, monospace; transition: max-height .3s ease; }
body:not(.dark) .raw-text { background:#111827; color:#f8fafc; border-color:#1e293b; }

.app-footer { margin-top:42px; font-size:12px; text-align:center; opacity:.65; }
body.dark .app-footer { opacity:.5; }

button { font-family:inherit; }

.fade-in { animation: fade .5s ease; }
@keyframes fade { from { opacity:0; transform:translateY(4px);} to { opacity:1; transform:translateY(0);} }

.empty-hint { padding:18px; text-align:center; font-size:14px; color:#64748b; border:1px dashed #cbd5e1; border-radius:14px; background:#f8fafc; }
body.dark .empty-hint { background:#1e293b; border-color:#334155; color:#94a3b8; }

.highlight-latest { outline:2px solid #f59e0b; box-shadow:0 0 0 4px rgba(245,158,11,.35); }

.copy-success { position:fixed; top:18px; right:18px; background:#10b981; color:#fff; padding:10px 16px; border-radius:10px; font-size:14px; box-shadow:0 6px 18px -4px rgba(16,185,129,.55); animation: fadeOut 2.8s forwards; }
@keyframes fadeOut { 0%{opacity:0; transform:translateY(-6px);}10%,85%{opacity:1; transform:translateY(0);}100%{opacity:0; transform:translateY(-4px);} }

.no-select { user-select:none; }
